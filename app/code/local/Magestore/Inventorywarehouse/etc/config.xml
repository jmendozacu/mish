<?xml version="1.0"?>
<!--
/**
 * Magestore
 * 
 * NOTICE OF LICENSE
 * 
 * This source file is subject to the Magestore.com license that is
 * available through the world-wide-web at this URL:
 * http://www.magestore.com/license-agreement.html
 * 
 * DISCLAIMER
 * 
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 * 
 * @category    Magestore
 * @package     Magestore_Inventorywarehouse
 * @copyright   Copyright (c) 2012 Magestore (http://www.magestore.com/)
 * @license     http://www.magestore.com/license-agreement.html
 */
-->
<config>
    <modules>
        <Magestore_Inventorywarehouse>
            <version>0.1.2</version>
        </Magestore_Inventorywarehouse>
    </modules>
    <frontend>
        <routers>
            <inventorywarehouse>
                <use>standard</use>
                <args>
                    <module>Magestore_Inventorywarehouse</module>
                    <frontName>inventorywarehouse</frontName>
                </args>
            </inventorywarehouse>
        </routers>
        <layout>
            <updates>
                <inventorywarehouse>
                    <file>inventorywarehouse.xml</file>
                </inventorywarehouse>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Inventorywarehouse>
                    <files>
                        <default>Magestore_Inventorywarehouse.csv</default>
                    </files>
                </Magestore_Inventorywarehouse>
            </modules>
        </translate>
    </frontend>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <magestore_inventorywarehouse after="Mage_Adminhtml">Magestore_Inventorywarehouse_Adminhtml</magestore_inventorywarehouse>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <inventorywarehouse>
                    <file>inventorywarehouse.xml</file>
                </inventorywarehouse>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Inventorywarehouse>
                    <files>
                        <default>Magestore_Inventorywarehouse.csv</default>
                    </files>
                </Magestore_Inventorywarehouse>
            </modules>
        </translate>
        <events>
            <inventory_adminhtml_add_column_permission_grid>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>column_permission_grid</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventory_adminhtml_add_column_permission_grid>
            <inventory_adminhtml_add_more_permission>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>add_more_permission</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventory_adminhtml_add_more_permission>
            <adjust_stock_html_before>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>adjust_stock_html</method>
                    </inventorywarehouse_observers>
                </observers>
            </adjust_stock_html_before>
            
            <!-- add more tab in warehouse -->    
            <inventory_adminhtml_add_top_tab_warehouse>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>inventory_adminhtml_add_top_tab_warehouse</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventory_adminhtml_add_top_tab_warehouse>         
            <inventory_adminhtml_add_tab_warehouse>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>addWarehouseTab</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventory_adminhtml_add_tab_warehouse>
            <warehouse_controller_index>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>warehouse_controller_index</method>
                    </inventorywarehouse_observers>
                </observers>
            </warehouse_controller_index>
            <inventory_adminhtml_add_new_product>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>warehouse_add_new_product</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventory_adminhtml_add_new_product>
            
            <!-- add warehouse and supplier when create product -->
            <catalog_product_save_after>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>catalogProductSaveAfterEvent</method>
                    </inventorywarehouse_observers>
                </observers>
            </catalog_product_save_after>
            
            <!-- duplicate product -->
            <catalog_model_product_duplicate>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>catalogModelProductDuplicate</method>
                    </inventorywarehouse_observers>
                </observers>
            </catalog_model_product_duplicate>
            <inventoryplus_inventory_stock_action_buttons>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>inventoryplus_inventory_stock_action_buttons</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventoryplus_inventory_stock_action_buttons>  
            <inventoryplus_warehouse_stock_action_buttons>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>inventoryplus_warehouse_stock_action_buttons</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventoryplus_warehouse_stock_action_buttons>

            <!-- Save stores in warehouse-->
            <inventoryplus_warehouse_save_after>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>inventoryplus_warehouse_save_after</method>
                    </inventorywarehouse_observers>
                </observers>
            </inventoryplus_warehouse_save_after>
            <!-- End Save stores in warehouse-->
            <storepickup_general_information_tab_before>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>storepickup_general_information_tab_before</method>
                    </inventorywarehouse_observers>
                </observers>                
            </storepickup_general_information_tab_before>
            <storelocator_general_information_tab_before>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>storelocator_general_information_tab_before</method>
                    </inventorywarehouse_observers>
                </observers>                
            </storelocator_general_information_tab_before>            
            <storepickup_save_after>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>storepickup_save_after</method>
                    </inventorywarehouse_observers>
                </observers>                  
            </storepickup_save_after>     
            <storelocator_save_after>
                <observers>
                    <inventorywarehouse_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>storelocator_save_after</method>
                    </inventorywarehouse_observers>
                </observers>                  
            </storelocator_save_after>                  
        </events>
    </adminhtml>   
    <global>
        <models>
            <inventorywarehouse>
                <class>Magestore_Inventorywarehouse_Model</class>
                <resourceModel>inventorywarehouse_mysql4</resourceModel>
            </inventorywarehouse>
            <inventorywarehouse_mysql4>
                <class>Magestore_Inventorywarehouse_Model_Mysql4</class>
                <entities>
                    <sendstock>
                        <table>erp_inventory_warehouse_sendstock</table>
                    </sendstock>
                    <sendstock_product>
                        <table>erp_inventory_warehouse_sendstock_product</table>
                    </sendstock_product>                    
                    <requeststock>
                        <table>erp_inventory_warehouse_requeststock</table>
                    </requeststock>
                    <requeststock_product>
                        <table>erp_inventory_warehouse_requeststock_product</table>
                    </requeststock_product>                    
                    <transaction>
                        <table>erp_inventory_warehouse_transaction</table>
                    </transaction>
                    <transaction_product>
                        <table>erp_inventory_warehouse_transaction_product</table>
                    </transaction_product>
                    <warehouse_refund>
                        <table>erp_inventory_warehouse_refund</table>
                    </warehouse_refund>
                </entities>
            </inventorywarehouse_mysql4>
            <cataloginventory>
                <rewrite>
                    <stock_item>Magestore_Inventorywarehouse_Model_Rewrite_CatalogInventoryStockItem</stock_item>
                </rewrite>
            </cataloginventory>
        </models>
        <resources>
            <inventorywarehouse_setup>
                <setup>
                    <module>Magestore_Inventorywarehouse</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </inventorywarehouse_setup>
            <inventorywarehouse_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </inventorywarehouse_write>
            <inventorywarehouse_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </inventorywarehouse_read>
        </resources>
        <blocks>
            <inventorywarehouse>
                <class>Magestore_Inventorywarehouse_Block</class>
            </inventorywarehouse>            
        </blocks>
        <helpers>
            <inventorywarehouse>
                <class>Magestore_Inventorywarehouse_Helper</class>
            </inventorywarehouse>
        </helpers>
        <template>
            <email>                
                <inventoryplus_transaction_sendstock_email translate="label" module="inventoryplus">
                    <label>Inventory Sendstock Email Notice</label>
                    <file>inventory/sendstock_email_notice.html</file>
                    <type>html</type>
                </inventoryplus_transaction_sendstock_email>  
                <inventoryplus_email_warehouse_email translate="label" module="inventoryplus">
                    <label>Inventory Warehouse Email Notice</label>
                    <file>inventory/warehouse_email_notice.html</file>
                    <type>html</type>
                </inventoryplus_email_warehouse_email>           
            </email>
        </template>
        <events>
            <sales_order_place_after>
                <observers>
                    <inventory_observers>
                        <class>inventorywarehouse/observer</class>
                        <method>salesOrderPlaceAfter</method>
                    </inventory_observers>
                </observers>
            </sales_order_place_after>   
            <sales_order_shipment_save_after>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>salesOrderShipmentSaveAfter</method>
                    </inventorywarehouse_observers>
                </observers>
            </sales_order_shipment_save_after>
            <sales_order_shipment_save_before>
                <observers>
                    <inventorywarehouse_observers>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>salesOrderShipmentSaveBefore</method>
                    </inventorywarehouse_observers>
                </observers>
            </sales_order_shipment_save_before>
            <catalog_product_is_salable_after>
                <observers>
                    <inventoryplus>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>checkProductIsSalableInWarehouse</method>
                    </inventoryplus>
                </observers>
            </catalog_product_is_salable_after>
            <sales_quote_item_qty_set_after>
                <observers>
                    <inventoryplus>
                        <type>model</type>
                        <class>inventorywarehouse/observer</class>
                        <method>checkQuoteItemQtyByWarehouse</method>
                    </inventoryplus>
                </observers>
            </sales_quote_item_qty_set_after>
        </events>        
    </global>
    <default>
        <inventoryplus>
            <general>
                <select_warehouse>1</select_warehouse>
            </general>            
            <transaction>
                <cancel_time>30</cancel_time>
                <transaction_notice>1</transaction_notice>              
            </transaction>            
        </inventoryplus>        
    </default>
</config>